{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/UploadProductphoto.vue?vue&type=style&index=0&id=755a85d4&lang=scss&scoped=true&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/UploadProductphoto.vue","mtime":1592981728603},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5OZXdQcm9kdWN0SW1newogIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSAxNXJlbSk7Cn0KLmxpbWl0TnVtewogIGZvbnQtc2l6ZTogMTZweDsKfQo="},{"version":3,"sources":["UploadProductphoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA","file":"UploadProductphoto.vue","sourceRoot":"src/components/back_side","sourcesContent":["<template>\n  <div class=\"container\">\n        <div class=\"container\">\n          <nav aria-label=\"breadcrumb\">\n            <ol class=\"breadcrumb\">\n              <li class=\"breadcrumb-item\">\n                <a href=\"/Home\">首頁</a>\n              </li>\n              <li class=\"breadcrumb-item active\" aria-current=\"page\">編輯商品</li>\n              <li class=\"breadcrumb-item active\" aria-current=\"page\">編輯圖片</li>\n            </ol>\n          </nav>\n        </div>\n        <div class=\"NewProductImg bg-light px-4 py-4\" >\n            <h3 class=\"text-center mt-5 mb-5\">上傳商品圖片<span class=\"limitNum\">(最多1張)</span></h3>\n            <el-form class=\"form-wrapper padding\" ref=\"showImage\" :model=\"showImage\" :rules=\"addRules\">\n            <el-form-item prop=\"photo\">\n            <el-upload\n              action=\"upload\"\n              list-type=\"picture-card\"\n              :multiple=\"multiple\"\n              :limit=\"1\"\n              accept=\"image/jpeg, image/png\"\n              :before-upload=\"beforeAvatarUpload\"\n              ref=\"upload\"\n              :auto-upload=\"false\"\n              :on-exceed=\"handleExceed\"\n              :on-success=\"uploadSuccess\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-remove=\"handleRemove\"\n             >\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\">\n            </el-dialog>\n            </el-form-item >\n            </el-form>\n            <div class=\"Button mx-auto d-flex justify-content-center pt-5\">\n              <button type=\"button\" class=\"btn btn-warning\" @click.prevent=\"$router.go(-1)\">上一頁</button>\n              <button type=\"button\" class=\"btn btn-primary ml-3\"  @click.prevent=\"uploadFile()\">確定</button>\n              <button type=\"button\" class=\"btn btn-warning ml-3\"  @click.prevent=\"$router.push('/sellerstore')\">返回賣場</button>\n            </div>\n        </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      showImage: {\n        imageUrl: '',\n        id: ''\n      },\n      dialogImageUrl: '',\n      dialogVisible: false,\n      addRules: { // 表单验证规则\n        photo: [{ required: true, message: '請上傳商品照', trigger: 'blur' }]\n      },\n      multiple: true,\n      formData: '',\n      file: ''\n    }\n  },\n  methods: {\n    uploadSuccess (file) {\n      this.formData.append('file', file)\n    },\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg' || 'image/png'\n      const isLt3M = file.size / 3072 / 3072 < 2\n      if (!isJPG) {\n        this.$message.error('上傳頭像圖片只能是 JPG / PNG 格式!')\n      }\n      if (!isLt3M) {\n        this.$message.error('上傳頭像圖片大小不能超过 3MB!')\n      }\n      // 校验成功上传文件\n      if (isJPG && isLt3M === true) {\n        this.file = file\n      }\n      return isJPG && isLt3M\n    },\n    uploadFile () {\n      const id = this.$route.params.id\n      const token = localStorage.getItem('token')\n      this.$refs.upload.submit(id)\n      const form = new FormData()\n      form.append('upload', this.file)\n      const api = `http://switcher.rocket-coding.com/api/product/upload/${id}`\n      this.$http.post(api, form, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.photoSuccess(res.data.message)\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    photoSuccess (msg) {\n      this.$notify({\n        title: msg,\n        type: 'success'\n      })\n    },\n    handleRemove (file) {\n      this.$notify({\n        title: `已移除 ${file.name}`,\n        type: 'success'\n      })\n    },\n    handlePictureCardPreview (file) {\n      this.dialogImageUrl = file.url\n      this.dialogVisible = true\n    },\n    handleExceed (files, fileList) {\n      this.$message.warning(`目前共有 ${files.length} 張圖片，共選擇了 ${files.length + fileList.length} 張圖片`)\n    },\n    initInfo () {\n      this.editForm = {\n        id: 1,\n        photo: ''\n      }\n    }\n  },\n  inject: ['reload'],\n  props: ['ProductImages']\n}\n</script>\n<style lang=\"scss\" scoped>\n.NewProductImg{\n  min-height: calc(100vh - 15rem);\n}\n.limitNum{\n  font-size: 16px;\n}\n</style>\n"]}]}