{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/views/CartList.vue?vue&type=style&index=0&id=37d8f9d0&lang=scss&scoped=true&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/views/CartList.vue","mtime":1592981728606},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudGV4dC1tdXRlZHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLnN3aXRjaGVyT3JkZXItY29udGVudCAuZmEtdHJhc2gtYWx0OmhvdmVyewogIGNvbG9yOiAjRkY3RDAxOwp9Ci5lbmRMaW5lewogIHdpZHRoOiAxMDBweDsKICBoZWlnaHQ6IDVweDsKICBiYWNrZ3JvdW5kOiAjZWRlZGVkOwogIG1hcmdpbjogMCBhdXRvOwp9Ci50b3RhbFR4dHsKICBmb250LXNpemU6IDIwcHg7Cn0KLnRvdGFsTnVtewogIGZvbnQtc2l6ZTogMzBweDsKICBjb2xvcjogI0ZGN0QwMTsKICBmb250LXdlaWdodDogNzAwOwp9Ci5zaG9wcGluZ3sKICBmb250LXNpemU6IDgwcHg7Cn0KLnN1Ym1pdEJ0bnsKICBoZWlnaHQ6IGZpdC1jb250ZW50Owp9CiNzd2l0Y2hlck9yZGVyLW9uZXsKICBtaW4taGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTJyZW0pOwp9Cg=="},{"version":3,"sources":["CartList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <section id=\"switcherOrder-one\" class=\"bg-light\">\n      <el-backtop :bottom=\"60\"></el-backtop>\n      <div class=\"loading vh-100\" v-if=\"loading\"><img src=\"/img/Spinner-1.1s-200px.gif\" alt=\"loading\"></div>\n      <div>\n      <div class=\"container\" v-if=\"$root.getCarts.length === 0 || this.$root.getCartLen === 0\">\n          <div class=\"text-center vh-100 d-flex flex-column justify-content-center align-items-center\">\n            <h2 class=\"font-weight-bold pt-5 pb-5\">沒有商品在購物車內</h2>\n            <span class=\"shopping\"><font-awesome-icon icon=\"cart-arrow-down\"/></span>\n          </div>\n      </div>\n      <div class=\"container mb-5\" v-if=\"$root.getCarts.length\">\n          <div class=\"row pt-5\">\n              <div class=\"col-md-6 col-10 mx-auto mt-5 mb-5\">\n                  <h4 class=\"text-center mb-3 font-weight-bold\">您的購物車</h4>\n                  <div class=\"endLine mb-4\"></div>\n              </div>\n          </div>\n          <div>\n            <div class=\"switcherOrder-orderArea border border-secondary pt-3 pb-3 pl-3 pr-3 mb-4\" v-for=\"(index, item) in cartData\" :key=\"index[0].Id\">\n              <h6><i class=\"mr-2\"><font-awesome-icon icon=\"store\"/></i>賣家帳號 : <span>{{item}}</span></h6>\n              <div class=\"row switcherOrder-content d-flex align-items-center pb-3 border-bottom border-light mb-3\" v-for=\"info in index\" :key=\"info.Id\">\n                  <div class=\"col-md-4 switcherOrder-img\">\n                      <router-link :to =\"{name: 'Product', params: { id: info.Product.ProductId }}\"><img :src=\"info.Product.ImageUrl\" alt=\"game\"></router-link>\n                  </div>\n                  <div class=\"col-md-7\">\n                      <div class=\"d-flex align-items-baseline\">\n                          <h6>{{info.Product.Name}}</h6>\n                          <span class=\"category-games bg-danger text-white ml-3 rounded\">{{info.Product.Category}}</span>\n                      </div>\n                      <div class=\"d-flex\">\n                          <div class=\"d-flex align-items-baseline mr-3\">\n                              <font-awesome-icon icon=\"user-circle\"/>\n                              <p class=\"ml-1 mb-1\">{{info.Seller}}</p>\n                          </div>\n                          <div class=\"d-flex align-items-baseline\">\n                              <span class=\"isLease-icon\"><font-awesome-icon icon=\"circle\"/></span>\n                              <span class=\"isLease\">{{info.Product.Status}}</span>\n                          </div>\n                      </div>\n                      <div class=\"content-prices d-flex align-items-baseline\">\n                          <p class=\"mb-1 mr-2\">租金 : <span >{{info.Product.Total}}</span>元</p>\n                          <p class=\"mb-1\">押金 : <span>{{info.Product.Deposit}}</span>元</p>\n                      </div>\n                      <div class=\"d-flex align-items-baseline\">\n                          <p class=\"mb-1 mr-2\">商品數量 : <span>{{info.Product.Quantity}}</span></p>\n                          <p class=\"mb-1\">面交地點 : <span>7-11 {{info.Product.Store}} 門市</span></p>\n                      </div>\n                      <div class=\"d-flex align-items-baseline sm-date\">\n                          <p class=\"mb-1\">選擇日期 : <span class=\"choosed-date\">{{info.Product.StartDate}} ~ {{info.Product.EndDate}}</span></p>\n                          <p class=\"mb-1 ml-2\">共<span>{{info.Product.Period}}</span>日</p>\n                      </div>\n                  </div>\n                  <div class=\"col-md-1 switcherOrder-delete\" @click.prevent=\"open(index[0].Id)\"><font-awesome-icon icon=\"trash-alt\"/></div>\n              </div>\n              <div class=\"d-flex justify-content-between align-items-center\">\n                  <div class=\"d-flex justify-content-end pr-3\">\n                    <p class=\"totalTxt mr-3\">總租金 : <span class=\"totalNum\">{{totalPrice(index)}}</span> 元</p>\n                    <p class=\"totalTxt ml-3\">總押金 : <span class=\"totalNum\">{{totalDeposit(index)}}</span> 元</p>\n                  </div>\n                  <el-button type=\"warning\" class=\"submitBtn\" @click.prevent=\"goToSubmit(item, index, totalPrice(index), totalDeposit(index))\">送出預約<i class=\"el-icon-sold-out ml-2\"></i></el-button>\n              </div>\n            </div>\n          </div>\n      </div>\n      <div class=\"container pb-5\">\n        <div class=\"row \">\n          <div class=\"col-12 d-flex justify-content-center\">\n            <button type=\"button\" class=\"btn btn-outline-primary btn-lg\" @click.prevent=\"$router.push('/findGames/allGame')\"><font-awesome-icon icon=\"shopping-cart\" class=\"mr-2\"/>繼續選購</button>\n          </div>\n        </div>\n      </div>\n      </div>\n    </section>\n</template>\n\n<script>\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      loading: false\n    }\n  },\n  created () {\n    this.getCartData()\n  },\n  methods: {\n    open (idx) {\n      this.$confirm('此操作將永遠刪除該商品, 是否繼續 ?', '提示', {\n        confirmButtonText: '確定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const api = `http://switcher.rocket-coding.com/api/cart/${idx}`\n        const token = localStorage.getItem('token')\n        this.$http.delete(api, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(\n          setTimeout(_ => {\n            this.getCartData()\n          }, 100),\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        )\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    getCartData () {\n      this.cartData = {}\n      this.$root.getCarts = []\n      this.$root.getCartLen = 0\n      const api = 'http://switcher.rocket-coding.com/api/cart'\n      const token = localStorage.getItem('token')\n      this.loading = true\n      this.$http.get(api, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        // 整理成賣家:{Product}\n        const data = res.data.carts\n        data.forEach(data => {\n          const seller = data.Seller\n          if (!this.cartData[seller]) {\n            this.$set(this.cartData, seller, [data])\n          } else {\n            this.cartData[seller].push(data)\n          }\n        })\n        // 原生資料\n        this.$root.getCarts = res.data.carts\n        this.$root.getCartLen = res.data.carts.length\n        localStorage.setItem('cartLen', res.data.carts.length)\n        this.loading = false\n        return this.$root.getCarts\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    totalPrice (val) {\n      var countTotal = 0\n      for (var i = 0; i < val.length; i++) {\n        var item = val[i].Product\n        countTotal += item.Total\n      }\n      return countTotal.toLocaleString()\n    },\n    totalDeposit (val) {\n      var countTotal = 0\n      for (var i = 0; i < val.length; i++) {\n        var item = val[i].Product\n        countTotal += item.Deposit\n      }\n      return countTotal.toLocaleString()\n    },\n    goToSubmit (seller, index, Price, Deposit) {\n      var sellerId = 0\n      for (var i = 0; i < index.length; i++) {\n        sellerId = index[i].SellerId\n      }\n      this.$root.orderInfo.seller = seller\n      this.$root.orderProducts = index\n      this.$root.orderInfo.totalPrice = Price\n      this.$root.orderInfo.totalDeposit = Deposit\n      this.$root.orderInfo.totalProducts = index.length\n      this.$router.push({ name: 'CartInputs', params: { id: sellerId } })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.text-muted{\n  cursor: pointer;\n}\n.switcherOrder-content .fa-trash-alt:hover{\n  color: #FF7D01;\n}\n.endLine{\n  width: 100px;\n  height: 5px;\n  background: #ededed;\n  margin: 0 auto;\n}\n.totalTxt{\n  font-size: 20px;\n}\n.totalNum{\n  font-size: 30px;\n  color: #FF7D01;\n  font-weight: 700;\n}\n.shopping{\n  font-size: 80px;\n}\n.submitBtn{\n  height: fit-content;\n}\n#switcherOrder-one{\n  min-height: calc(100vh - 12rem);\n}\n</style>\n"]}]}