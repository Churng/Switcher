{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/AddProductphoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/AddProductphoto.vue","mtime":1592797222003},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgZmlsZTogJycKICAgIH0KICB9LAogIGluamVjdDogWydyZWxvYWQnXSwKICBwcm9wczogWydQcm9kdWN0SW1hZ2VzJ10sCiAgbWV0aG9kczogewogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyAocmVzLCBmaWxlKSB7CiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KQogICAgfSwKICAgIGJlZm9yZUF2YXRhclVwbG9hZCAoZmlsZSkgewogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDMwNzIgLyAzMDcyIDwgMgogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5YKz5ZyW54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJykKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuWCs+mgreWDj+WclueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJykKICAgICAgfQogICAgICAvLyDmoKHpqozmiJDlip/kuIrkvKDmlofku7YKICAgICAgaWYgKGlzSlBHICYmIGlzTHQyTSA9PT0gdHJ1ZSkgewogICAgICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgICAgdGhpcy5maWxlID0gZmlsZQogICAgICB9CiAgICAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk0KICAgIH0sCiAgICAvLyDpgInlj5blm77niYflkI7oh6rliqjlm57osIPvvIzph4zpnaLlj6/ku6Xojrflj5bliLDmlofku7YKICAgIGltZ1NhdmVUb1VybCAoZmlsZSkgewogICAgICAvKiDmnKzlnLDpooTop4jmlrnms5UgKi8KICAgICAgY29uc3QgVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMCiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KQogICAgICAvLyDovazmjaLlkI7nmoTlnLDlnYDkuLogYmxvYjpodHRwOi8veHh4LzdiZjU0MzM4LTc0YmItNDdiOS05YTdmLTdhNzA5M2M3MTZiNQogICAgfSwKICAgIHVwbG9hZEZpbGUgKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpCiAgICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtLmFwcGVuZCgndXBsb2FkJywgdGhpcy5maWxlKQogICAgICBjb25zdCBhcGkgPSBgaHR0cDovL3N3aXRjaGVyLnJvY2tldC1jb2RpbmcuY29tL2FwaS9wcm9kdWN0L3VwbG9hZC8ke2lkfWAKICAgICAgdGhpcy4kaHR0cC5wb3N0KGFwaSwgZm9ybSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLAogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucGhvdG9TdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZShlcnIpCiAgICAgIH0pCiAgICB9LAogICAgcGhvdG9TdWNjZXNzIChtc2cpIHsKICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICB0aXRsZTogbXNnLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["AddProductphoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddProductphoto.vue","sourceRoot":"src/components/back_side","sourcesContent":["<template>\n    <div class=\"container bg-light\">\n        <div class=\"NewProductImg px-5 py-5\" >\n            <h3 class=\"text-center mt-5 mb-5\">上傳商品圖片</h3>\n            <el-upload\n              class=\"avatar-uploader\"\n              action = \"upload\"\n              :show-file-list=\"false\"\n              :on-success=\"handleAvatarSuccess\"\n              :before-upload=\"beforeAvatarUpload\"\n              ref=\"upload\"\n              :on-change=\"imgSaveToUrl\"\n              >\n              <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n            <div class=\"Button mx-auto d-flex justify-content-center mt-5 pt-3\">\n              <button type=\"button\" class=\"btn btn-warning\" @click.prevent=\"$router.go(-1)\">上一頁</button>\n              <button type=\"button\" class=\"btn btn-primary ml-3\"  @click.prevent=\"uploadFile()\">確定</button>\n              <button type=\"button\" class=\"btn btn-warning ml-3\"  @click.prevent=\"$router.push('/sellerstore')\">返回賣場</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n  data () {\n    return {\n      imageUrl: '',\n      file: ''\n    }\n  },\n  inject: ['reload'],\n  props: ['ProductImages'],\n  methods: {\n    handleAvatarSuccess (res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw)\n    },\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg'\n      const isLt2M = file.size / 3072 / 3072 < 2\n      if (!isJPG) {\n        this.$message.error('上傳圖片只能是 JPG 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上傳頭像圖片大小不能超过 2MB!')\n      }\n      // 校验成功上传文件\n      if (isJPG && isLt2M === true) {\n        console.log(file)\n        this.file = file\n      }\n      return isJPG && isLt2M\n    },\n    // 选取图片后自动回调，里面可以获取到文件\n    imgSaveToUrl (file) {\n      /* 本地预览方法 */\n      const URL = window.URL || window.webkitURL\n      this.imageUrl = URL.createObjectURL(file.raw)\n      // 转换后的地址为 blob:http://xxx/7bf54338-74bb-47b9-9a7f-7a7093c716b5\n    },\n    uploadFile () {\n      const id = this.$route.params.id\n      const token = localStorage.getItem('token')\n      const form = new FormData()\n      form.append('upload', this.file)\n      const api = `http://switcher.rocket-coding.com/api/product/upload/${id}`\n      this.$http.post(api, form, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.photoSuccess(res.data.message)\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    photoSuccess (msg) {\n      this.$notify({\n        title: msg,\n        type: 'success'\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.NewProductImg{\n    height: 100vh\n}\n.avatar-uploader{\n  display: flex;\n  justify-content: center;\n}\n.el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon:hover  {\n  border: 5px dotted red;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 250px;\n  height: 250px;\n  line-height: 250px;\n  text-align: center;\n  border: 5px dotted black;\n}\n.avatar-uploader{\n  display: flex;\n  justify-content: center;\n}\n.el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 250px;\n  height: 250px;\n  line-height: 250px;\n  text-align: center;\n}\n.avatar {\n  width: 250px;\n  height: 250px;\n  display: block;\n}\n</style>\n"]}]}