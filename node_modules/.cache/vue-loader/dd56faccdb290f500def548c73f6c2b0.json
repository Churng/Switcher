{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/OrderRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/OrderRecord.vue","mtime":1592982386925},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPcmRlckRldGFpbHMgZnJvbSAnLi4vYmFja19zaWRlL09yZGVyRGV0YWlscycKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vbmVEYXRhOiBmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGdldEFsbERhdGE6IFtdLAogICAgICBnZXRTaW5nbGVEYXRhOiBbXQogICAgfQogIH0sCiAgcHJvcHM6IFsncmVudGFsRGF0YScsICd1c2VyRGF0YSddLAogIGNvbXBvbmVudHM6IHsgT3JkZXJEZXRhaWxzIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbHRlcklkQXJyICgpIHsKICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgIGNvbnN0IGFyciA9IHZtLnJlbnRhbERhdGEuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLlVzZXIuTWVtYmVySWQgPT09IHZtLnVzZXJEYXRhLklkKSB7CiAgICAgICAgICByZXR1cm4gaXRlbQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bS5ub25lRGF0YSA9IHRydWUKICAgICAgICAgIHJldHVybiB2bS5ub25lRGF0YQogICAgICAgIH0KICAgICAgfSkKICAgICAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS5PcmRlckRhdGUgPCBiLk9yZGVyRGF0ZSA/IDEgOiAtMQogICAgICB9KQogICAgICByZXR1cm4gYXJyCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWx0ZXJQcm9kdWN0RGF0YSAodmFsKSB7CiAgICAgIGNvbnN0IGFwaSA9IGBodHRwOi8vc3dpdGNoZXIucm9ja2V0LWNvZGluZy5jb20vYXBpL29yZGVyLyR7dmFsfWAKICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQogICAgICB0aGlzLiRodHRwLmdldChhcGksCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmdldEFsbERhdGEgPSByZXMuZGF0YS5vcmRlclswXQogICAgICAgIHRoaXMuZ2V0U2luZ2xlRGF0YSA9IHJlcy5kYXRhLm9yZGVyWzBdLlByb2R1Y3QKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy5lcnJJbmZvKGVycikKICAgICAgfSkKICAgIH0sCiAgICBjaGFuZ2VGYVN0YXR1cyAoc3RhdHVzLCBJZCkgewogICAgICB0aGlzLmdldEFsbERhdGEuU3RhdHVzID0gc3RhdHVzCiAgICAgIHRoaXMuZmlsdGVySWRBcnIuZmlsdGVyKGRhdGEgPT4gewogICAgICAgIGlmIChkYXRhLklkID09PSBJZCkgewogICAgICAgICAgZGF0YS5TdGF0dXMgPSBzdGF0dXMKICAgICAgICAgIHJldHVybiBkYXRhLlN0YXR1cwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["OrderRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderRecord.vue","sourceRoot":"src/components/back_side","sourcesContent":["<template>\n  <table class=\"table mt-3 buyer\">\n    <thead class=\"text-center\">\n      <tr>\n        <th scope=\"col\">項目</th>\n        <th scope=\"col\">出租者</th>\n        <th scope=\"col\">預約日期</th>\n        <th scope=\"col\">總租金</th>\n        <th scope=\"col\">總押金</th>\n        <th scope=\"col\">訂單狀態</th>\n        <th scope=\"col\">詳請</th>\n      </tr>\n    </thead>\n    <tbody class=\"text-center seller-order\" v-if=\"noneData\">\n      <tr>\n        <td colspan=\"7\"><h2>尚無訂購紀錄</h2></td>\n      </tr>\n    </tbody>\n    <tbody class=\"text-center buyer-order orderContents\" v-else >\n      <tr v-for=\"(item, index) in filterIdArr\" :key=\"index\" @changeStatus = \"changeFaStatus\">\n        <td>{{index+1}}</td>\n        <td>{{item.Product[0].Seller}}</td>\n        <td>{{item.OrderDate}}</td>\n        <td>{{item.FinalTotal}}</td>\n        <td>{{item.FinalDeposit}}</td>\n        <td>{{item.Status}}</td>\n        <td><button class=\"btn btn-primary openDetailBtn\" type=\"submit\" @click.prevent=\"filterProductData(item.Id)\">詳請</button></td>\n        <OrderDetails\n        :getAllData=\"getAllData\"\n        :getSingleData=\"getSingleData\"\n        v-if=\"dialogVisible\"\n        @changeDialogVisible =\"dialogVisible = false\"\n        @changeStatus = \"changeFaStatus\"/>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport OrderDetails from '../back_side/OrderDetails'\n\nexport default {\n  data () {\n    return {\n      noneData: false,\n      dialogVisible: false,\n      getAllData: [],\n      getSingleData: []\n    }\n  },\n  props: ['rentalData', 'userData'],\n  components: { OrderDetails },\n  computed: {\n    filterIdArr () {\n      const vm = this\n      const arr = vm.rentalData.filter(item => {\n        if (item.User.MemberId === vm.userData.Id) {\n          return item\n        } else {\n          vm.noneData = true\n          return vm.noneData\n        }\n      })\n      arr.sort(function (a, b) {\n        return a.OrderDate < b.OrderDate ? 1 : -1\n      })\n      return arr\n    }\n  },\n  methods: {\n    filterProductData (val) {\n      const api = `http://switcher.rocket-coding.com/api/order/${val}`\n      const token = localStorage.getItem('token')\n      this.$http.get(api,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(res => {\n        this.getAllData = res.data.order[0]\n        this.getSingleData = res.data.order[0].Product\n        this.dialogVisible = true\n      }).catch(err => {\n        this.errInfo(err)\n      })\n    },\n    changeFaStatus (status, Id) {\n      this.getAllData.Status = status\n      this.filterIdArr.filter(data => {\n        if (data.Id === Id) {\n          data.Status = status\n          return data.Status\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.table td{\n  vertical-align: inherit !important;\n}\n.orderContents{\n  height: 100%;\n  overflow-y: scroll;\n}\n</style>\n"]}]}