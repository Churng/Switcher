{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js!/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/RentalRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/RentalRecord.vue","mtime":1592642320071},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFJlbnRhbERldGFpbHMgZnJvbSAnLi4vYmFja19zaWRlL1JlbnRhbERldGFpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vbmVEYXRhOiBmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGdldEFsbERhdGE6IFtdLAogICAgICBnZXRTaW5nbGVEYXRhOiBbXQogICAgfTsKICB9LAogIHByb3BzOiBbJ29yZGVyRGF0YScsICd1c2VyRGF0YSddLAogIGNvbXBvbmVudHM6IHsKICAgIFJlbnRhbERldGFpbHM6IFJlbnRhbERldGFpbHMKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJJZEFycjogZnVuY3Rpb24gZmlsdGVySWRBcnIoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhcnIgPSB2bS5vcmRlckRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uUHJvZHVjdC5TZWxsZXJJZCA9PT0gdm0udXNlckRhdGEuSWQpIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bS5ub25lRGF0YSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gdm0ubm9uZURhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS5PcmRlckRhdGUgPCBiLk9yZGVyRGF0ZSA/IDEgOiAtMTsKICAgICAgfSk7CiAgICAgIHJldHVybiBhcnI7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWx0ZXJQcm9kdWN0RGF0YTogZnVuY3Rpb24gZmlsdGVyUHJvZHVjdERhdGEodmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgYXBpID0gImh0dHA6Ly9zd2l0Y2hlci5yb2NrZXQtY29kaW5nLmNvbS9hcGkvb3JkZXIvIi5jb25jYXQodmFsKTsKICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KGFwaSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5nZXRBbGxEYXRhID0gcmVzLmRhdGEub3JkZXJbMF07CiAgICAgICAgX3RoaXMuZ2V0U2luZ2xlRGF0YSA9IHJlcy5kYXRhLm9yZGVyWzBdLlByb2R1Y3Q7CiAgICAgICAgX3RoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZShlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VGYVN0YXR1czogZnVuY3Rpb24gY2hhbmdlRmFTdGF0dXMoc3RhdHVzLCBJZCkgewogICAgICB0aGlzLmdldEFsbERhdGEuU3RhdHVzID0gc3RhdHVzOwogICAgICB0aGlzLmZpbHRlcklkQXJyLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLklkID09PSBJZCkgewogICAgICAgICAgZGF0YS5TdGF0dXMgPSBzdGF0dXM7CiAgICAgICAgICByZXR1cm4gZGF0YS5TdGF0dXM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["RentalRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,aAAA,MAAA,4BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,aAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,KAAA,EAAA,CAAA,WAAA,EAAA,UAAA,CATA;AAUA,EAAA,UAAA,EAAA;AAAA,IAAA,aAAA,EAAA;AAAA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,GAAA,GAAA,EAAA,CAAA,SAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,OAAA,CAAA,QAAA,KAAA,EAAA,CAAA,QAAA,CAAA,EAAA,EAAA;AACA,iBAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,EAAA,CAAA,QAAA,GAAA,IAAA;AACA,iBAAA,EAAA,CAAA,QAAA;AACA;AACA,OAPA,CAAA;AAQA,MAAA,GAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,eAAA,CAAA,CAAA,SAAA,GAAA,CAAA,CAAA,SAAA,GAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAFA;AAGA,aAAA,GAAA;AACA;AAfA,GAXA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,6BACA,GADA,EACA;AAAA;;AACA,UAAA,GAAA,yDAAA,GAAA,CAAA;AACA,UAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,mBAAA,KAAA;AADA;AADA,OADA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,OAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,IAAA;AACA,OATA,EASA,KATA,CASA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,GAAA;AACA,OAXA;AAYA,KAhBA;AAiBA,IAAA,cAjBA,0BAiBA,MAjBA,EAiBA,EAjBA,EAiBA;AACA,WAAA,UAAA,CAAA,MAAA,GAAA,MAAA;AACA,WAAA,WAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,MAAA;AACA,iBAAA,IAAA,CAAA,MAAA;AACA;AACA,OALA;AAMA;AAzBA;AA5BA,CAAA","sourcesContent":["<template>\n  <table class=\"table mt-3\">\n    <thead class=\"text-center\">\n      <tr>\n        <th scope=\"col\">項目</th>\n        <th scope=\"col\">購買者</th>\n        <th scope=\"col\">E-mail</th>\n        <th scope=\"col\">聯絡電話</th>\n        <th scope=\"col\">訂單日期</th>\n        <th scope=\"col\">訂單狀態</th>\n        <th scope=\"col\">詳請</th>\n      </tr>\n    </thead>\n    <tbody class=\"text-center seller-order\" v-if=\"noneData\">\n      <tr>\n        <td colspan=\"6\"><h2>尚無出租紀錄</h2></td>\n      </tr>\n    </tbody>\n    <tbody class=\"text-center seller-order orderContents\" v-else>\n      <tr v-for=\"(item, index) in filterIdArr\" :key=\"index\" @changeStatus = \"changeFaStatus\">\n        <td>{{index+1}}</td>\n        <td>{{item.User.Name}}</td>\n        <td>{{item.User.Email}}</td>\n        <td>{{item.User.Phone}}</td>\n        <td>{{item.OrderDate}}</td>\n        <td>{{item.Status}}</td>\n        <td><button class=\"btn btn-primary openDetailBtn\" type=\"submit\" @click.prevent=\"filterProductData(item.Id)\">詳請</button></td>\n        <RentalDetails\n        :getAllData=\"getAllData\"\n        :getSingleData=\"getSingleData\"\n        v-if=\"dialogVisible\"\n        @changeDialogVisible =\"dialogVisible = false\"\n        @changeStatus = \"changeFaStatus\"/>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport RentalDetails from '../back_side/RentalDetails'\n\nexport default {\n  data () {\n    return {\n      noneData: false,\n      dialogVisible: false,\n      getAllData: [],\n      getSingleData: []\n    }\n  },\n  props: ['orderData', 'userData'],\n  components: { RentalDetails },\n  computed: {\n    filterIdArr () {\n      const vm = this\n      const arr = vm.orderData.filter(item => {\n        if (item.Product.SellerId === vm.userData.Id) {\n          return item\n        } else {\n          vm.noneData = true\n          return vm.noneData\n        }\n      })\n      arr.sort(function (a, b) {\n        return a.OrderDate < b.OrderDate ? 1 : -1\n      })\n      return arr\n    }\n  },\n  methods: {\n    filterProductData (val) {\n      const api = `http://switcher.rocket-coding.com/api/order/${val}`\n      const token = localStorage.getItem('token')\n      this.$http.get(api,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(res => {\n        this.getAllData = res.data.order[0]\n        this.getSingleData = res.data.order[0].Product\n        this.dialogVisible = true\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    changeFaStatus (status, Id) {\n      this.getAllData.Status = status\n      this.filterIdArr.filter(data => {\n        if (data.Id === Id) {\n          data.Status = status\n          return data.Status\n        }\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/back_side"}]}