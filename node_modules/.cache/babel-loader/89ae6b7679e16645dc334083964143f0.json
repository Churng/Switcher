{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js!/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/UploadProductphoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/UploadProductphoto.vue","mtime":1592981728603},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0ltYWdlOiB7CiAgICAgICAgaW1hZ2VVcmw6ICcnLAogICAgICAgIGlkOiAnJwogICAgICB9LAogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhZGRSdWxlczogewogICAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICAgIHBob3RvOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6KuL5LiK5YKz5ZWG5ZOB54WnJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICBmb3JtRGF0YTogJycsCiAgICAgIGZpbGU6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkU3VjY2VzczogZnVuY3Rpb24gdXBsb2FkU3VjY2VzcyhmaWxlKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7CiAgICB9LAogICAgYmVmb3JlQXZhdGFyVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSkgewogICAgICB2YXIgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJyB8fCAnaW1hZ2UvcG5nJzsKICAgICAgdmFyIGlzTHQzTSA9IGZpbGUuc2l6ZSAvIDMwNzIgLyAzMDcyIDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrlgrPpoK3lg4/lnJbniYflj6rog73mmK8gSlBHIC8gUE5HIOagvOW8jyEnKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0M00pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrlgrPpoK3lg4/lnJbniYflpKflsI/kuI3og73otoXov4cgM01CIScpOwogICAgICB9IC8vIOagoemqjOaIkOWKn+S4iuS8oOaWh+S7tgoKCiAgICAgIGlmIChpc0pQRyAmJiBpc0x0M00gPT09IHRydWUpIHsKICAgICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgICB9CgogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDNNOwogICAgfSwKICAgIHVwbG9hZEZpbGU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoaWQpOwogICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtLmFwcGVuZCgndXBsb2FkJywgdGhpcy5maWxlKTsKICAgICAgdmFyIGFwaSA9ICJodHRwOi8vc3dpdGNoZXIucm9ja2V0LWNvZGluZy5jb20vYXBpL3Byb2R1Y3QvdXBsb2FkLyIuY29uY2F0KGlkKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KGFwaSwgZm9ybSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pLAogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucGhvdG9TdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgcGhvdG9TdWNjZXNzOiBmdW5jdGlvbiBwaG90b1N1Y2Nlc3MobXNnKSB7CiAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6IG1zZywKICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSkgewogICAgICB0aGlzLiRub3RpZnkoewogICAgICAgIHRpdGxlOiAiXHU1REYyXHU3OUZCXHU5NjY0ICIuY29uY2F0KGZpbGUubmFtZSksCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUV4Y2VlZDogZnVuY3Rpb24gaGFuZGxlRXhjZWVkKGZpbGVzLCBmaWxlTGlzdCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIlx1NzZFRVx1NTI0RFx1NTE3MVx1NjcwOSAiLmNvbmNhdChmaWxlcy5sZW5ndGgsICIgXHU1RjM1XHU1NzE2XHU3MjQ3XHVGRjBDXHU1MTcxXHU5MDc4XHU2NEM3XHU0RTg2ICIpLmNvbmNhdChmaWxlcy5sZW5ndGggKyBmaWxlTGlzdC5sZW5ndGgsICIgXHU1RjM1XHU1NzE2XHU3MjQ3IikpOwogICAgfSwKICAgIGluaXRJbmZvOiBmdW5jdGlvbiBpbml0SW5mbygpIHsKICAgICAgdGhpcy5lZGl0Rm9ybSA9IHsKICAgICAgICBpZDogMSwKICAgICAgICBwaG90bzogJycKICAgICAgfTsKICAgIH0KICB9LAogIGluamVjdDogWydyZWxvYWQnXSwKICBwcm9wczogWydQcm9kdWN0SW1hZ2VzJ10KfTs="},{"version":3,"sources":["UploadProductphoto.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n        <div class=\"container\">\n          <nav aria-label=\"breadcrumb\">\n            <ol class=\"breadcrumb\">\n              <li class=\"breadcrumb-item\">\n                <a href=\"/Home\">首頁</a>\n              </li>\n              <li class=\"breadcrumb-item active\" aria-current=\"page\">編輯商品</li>\n              <li class=\"breadcrumb-item active\" aria-current=\"page\">編輯圖片</li>\n            </ol>\n          </nav>\n        </div>\n        <div class=\"NewProductImg bg-light px-4 py-4\" >\n            <h3 class=\"text-center mt-5 mb-5\">上傳商品圖片<span class=\"limitNum\">(最多1張)</span></h3>\n            <el-form class=\"form-wrapper padding\" ref=\"showImage\" :model=\"showImage\" :rules=\"addRules\">\n            <el-form-item prop=\"photo\">\n            <el-upload\n              action=\"upload\"\n              list-type=\"picture-card\"\n              :multiple=\"multiple\"\n              :limit=\"1\"\n              accept=\"image/jpeg, image/png\"\n              :before-upload=\"beforeAvatarUpload\"\n              ref=\"upload\"\n              :auto-upload=\"false\"\n              :on-exceed=\"handleExceed\"\n              :on-success=\"uploadSuccess\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-remove=\"handleRemove\"\n             >\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\">\n            </el-dialog>\n            </el-form-item >\n            </el-form>\n            <div class=\"Button mx-auto d-flex justify-content-center pt-5\">\n              <button type=\"button\" class=\"btn btn-warning\" @click.prevent=\"$router.go(-1)\">上一頁</button>\n              <button type=\"button\" class=\"btn btn-primary ml-3\"  @click.prevent=\"uploadFile()\">確定</button>\n              <button type=\"button\" class=\"btn btn-warning ml-3\"  @click.prevent=\"$router.push('/sellerstore')\">返回賣場</button>\n            </div>\n        </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      showImage: {\n        imageUrl: '',\n        id: ''\n      },\n      dialogImageUrl: '',\n      dialogVisible: false,\n      addRules: { // 表单验证规则\n        photo: [{ required: true, message: '請上傳商品照', trigger: 'blur' }]\n      },\n      multiple: true,\n      formData: '',\n      file: ''\n    }\n  },\n  methods: {\n    uploadSuccess (file) {\n      this.formData.append('file', file)\n    },\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg' || 'image/png'\n      const isLt3M = file.size / 3072 / 3072 < 2\n      if (!isJPG) {\n        this.$message.error('上傳頭像圖片只能是 JPG / PNG 格式!')\n      }\n      if (!isLt3M) {\n        this.$message.error('上傳頭像圖片大小不能超过 3MB!')\n      }\n      // 校验成功上传文件\n      if (isJPG && isLt3M === true) {\n        this.file = file\n      }\n      return isJPG && isLt3M\n    },\n    uploadFile () {\n      const id = this.$route.params.id\n      const token = localStorage.getItem('token')\n      this.$refs.upload.submit(id)\n      const form = new FormData()\n      form.append('upload', this.file)\n      const api = `http://switcher.rocket-coding.com/api/product/upload/${id}`\n      this.$http.post(api, form, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.photoSuccess(res.data.message)\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    photoSuccess (msg) {\n      this.$notify({\n        title: msg,\n        type: 'success'\n      })\n    },\n    handleRemove (file) {\n      this.$notify({\n        title: `已移除 ${file.name}`,\n        type: 'success'\n      })\n    },\n    handlePictureCardPreview (file) {\n      this.dialogImageUrl = file.url\n      this.dialogVisible = true\n    },\n    handleExceed (files, fileList) {\n      this.$message.warning(`目前共有 ${files.length} 張圖片，共選擇了 ${files.length + fileList.length} 張圖片`)\n    },\n    initInfo () {\n      this.editForm = {\n        id: 1,\n        photo: ''\n      }\n    }\n  },\n  inject: ['reload'],\n  props: ['ProductImages']\n}\n</script>\n<style lang=\"scss\" scoped>\n.NewProductImg{\n  min-height: calc(100vh - 15rem);\n}\n.limitNum{\n  font-size: 16px;\n}\n</style>\n"],"sourceRoot":"src/components/back_side"}]}