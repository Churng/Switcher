{"remainingRequest":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js!/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/AddProductphoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuhsuanlee/Switcher/main_vue/src/components/back_side/AddProductphoto.vue","mtime":1592797222003},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhsuanlee/Switcher/main_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZVVybDogJycsCiAgICAgIGZpbGU6ICcnCiAgICB9OwogIH0sCiAgaW5qZWN0OiBbJ3JlbG9hZCddLAogIHByb3BzOiBbJ1Byb2R1Y3RJbWFnZXMnXSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7CiAgICB9LAogICAgYmVmb3JlQXZhdGFyVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSkgewogICAgICB2YXIgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJzsKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDMwNzIgLyAzMDcyIDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrlgrPlnJbniYflj6rog73mmK8gSlBHIOagvOW8jyEnKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrlgrPpoK3lg4/lnJbniYflpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgICB9IC8vIOagoemqjOaIkOWKn+S4iuS8oOaWh+S7tgoKCiAgICAgIGlmIChpc0pQRyAmJiBpc0x0Mk0gPT09IHRydWUpIHsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgICB9CgogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOwogICAgfSwKICAgIC8vIOmAieWPluWbvueJh+WQjuiHquWKqOWbnuiwg++8jOmHjOmdouWPr+S7peiOt+WPluWIsOaWh+S7tgogICAgaW1nU2F2ZVRvVXJsOiBmdW5jdGlvbiBpbWdTYXZlVG9VcmwoZmlsZSkgewogICAgICAvKiDmnKzlnLDpooTop4jmlrnms5UgKi8KICAgICAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsKICAgICAgdGhpcy5pbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpOyAvLyDovazmjaLlkI7nmoTlnLDlnYDkuLogYmxvYjpodHRwOi8veHh4LzdiZjU0MzM4LTc0YmItNDdiOS05YTdmLTdhNzA5M2M3MTZiNQogICAgfSwKICAgIHVwbG9hZEZpbGU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtLmFwcGVuZCgndXBsb2FkJywgdGhpcy5maWxlKTsKICAgICAgdmFyIGFwaSA9ICJodHRwOi8vc3dpdGNoZXIucm9ja2V0LWNvZGluZy5jb20vYXBpL3Byb2R1Y3QvdXBsb2FkLyIuY29uY2F0KGlkKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KGFwaSwgZm9ybSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pLAogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucGhvdG9TdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgcGhvdG9TdWNjZXNzOiBmdW5jdGlvbiBwaG90b1N1Y2Nlc3MobXNnKSB7CiAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6IG1zZywKICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AddProductphoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,MAAA,EAAA,CAAA,QAAA,CAPA;AAQA,EAAA,KAAA,EAAA,CAAA,eAAA,CARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,+BACA,GADA,EACA,IADA,EACA;AACA,WAAA,QAAA,GAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,KAHA;AAIA,IAAA,kBAJA,8BAIA,IAJA,EAIA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,YAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA,OARA,CASA;;;AACA,UAAA,KAAA,IAAA,MAAA,KAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA;;AACA,aAAA,KAAA,IAAA,MAAA;AACA,KAnBA;AAoBA;AACA,IAAA,YArBA,wBAqBA,IArBA,EAqBA;AACA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,GAAA,IAAA,MAAA,CAAA,SAAA;AACA,WAAA,QAAA,GAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAHA,CAIA;AACA,KA1BA;AA2BA,IAAA,UA3BA,wBA2BA;AAAA;;AACA,UAAA,EAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,UAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,IAAA;AACA,UAAA,GAAA,kEAAA,EAAA,CAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,mBAAA,KAAA,CADA;AAEA,0BAAA;AAFA;AADA,OAAA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAPA,EAOA,KAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,GAAA;AACA,OATA;AAUA,KA3CA;AA4CA,IAAA,YA5CA,wBA4CA,GA5CA,EA4CA;AACA,WAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AAIA;AAjDA;AATA,CAAA","sourcesContent":["<template>\n    <div class=\"container bg-light\">\n        <div class=\"NewProductImg px-5 py-5\" >\n            <h3 class=\"text-center mt-5 mb-5\">上傳商品圖片</h3>\n            <el-upload\n              class=\"avatar-uploader\"\n              action = \"upload\"\n              :show-file-list=\"false\"\n              :on-success=\"handleAvatarSuccess\"\n              :before-upload=\"beforeAvatarUpload\"\n              ref=\"upload\"\n              :on-change=\"imgSaveToUrl\"\n              >\n              <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n            <div class=\"Button mx-auto d-flex justify-content-center mt-5 pt-3\">\n              <button type=\"button\" class=\"btn btn-warning\" @click.prevent=\"$router.go(-1)\">上一頁</button>\n              <button type=\"button\" class=\"btn btn-primary ml-3\"  @click.prevent=\"uploadFile()\">確定</button>\n              <button type=\"button\" class=\"btn btn-warning ml-3\"  @click.prevent=\"$router.push('/sellerstore')\">返回賣場</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n  data () {\n    return {\n      imageUrl: '',\n      file: ''\n    }\n  },\n  inject: ['reload'],\n  props: ['ProductImages'],\n  methods: {\n    handleAvatarSuccess (res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw)\n    },\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/jpeg'\n      const isLt2M = file.size / 3072 / 3072 < 2\n      if (!isJPG) {\n        this.$message.error('上傳圖片只能是 JPG 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上傳頭像圖片大小不能超过 2MB!')\n      }\n      // 校验成功上传文件\n      if (isJPG && isLt2M === true) {\n        console.log(file)\n        this.file = file\n      }\n      return isJPG && isLt2M\n    },\n    // 选取图片后自动回调，里面可以获取到文件\n    imgSaveToUrl (file) {\n      /* 本地预览方法 */\n      const URL = window.URL || window.webkitURL\n      this.imageUrl = URL.createObjectURL(file.raw)\n      // 转换后的地址为 blob:http://xxx/7bf54338-74bb-47b9-9a7f-7a7093c716b5\n    },\n    uploadFile () {\n      const id = this.$route.params.id\n      const token = localStorage.getItem('token')\n      const form = new FormData()\n      form.append('upload', this.file)\n      const api = `http://switcher.rocket-coding.com/api/product/upload/${id}`\n      this.$http.post(api, form, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.photoSuccess(res.data.message)\n      }).catch(err => {\n        this.$message(err)\n      })\n    },\n    photoSuccess (msg) {\n      this.$notify({\n        title: msg,\n        type: 'success'\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.NewProductImg{\n    height: 100vh\n}\n.avatar-uploader{\n  display: flex;\n  justify-content: center;\n}\n.el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon:hover  {\n  border: 5px dotted red;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 250px;\n  height: 250px;\n  line-height: 250px;\n  text-align: center;\n  border: 5px dotted black;\n}\n.avatar-uploader{\n  display: flex;\n  justify-content: center;\n}\n.el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 250px;\n  height: 250px;\n  line-height: 250px;\n  text-align: center;\n}\n.avatar {\n  width: 250px;\n  height: 250px;\n  display: block;\n}\n</style>\n"],"sourceRoot":"src/components/back_side"}]}